!function(){"use strict";function e(e,n,s){var a=this;a.plans=[],a.newPlan={},a.errorMessage="",a.isBusy=!0,a.infoMessage="",a.showInfoMessage=!1,e.get("/api/plans").then(function(e){angular.copy(e.data,a.plans),0==a.plans.length?(a.infoMessage="You have not created any plan yet.",a.showInfoMessage=!0):n.reload,a.isBusy=!1},function(e){a.errorMessage="Failed to load data: "+e})["finally"](function(){a.isBusy=!1}),a.addPlan=function(){a.errorMessage="",a.isBusy=!0,e.post("/api/plans",a.newPlan).then(function(e){a.plans.push(e.data),a.newPlan={}},function(){a.errorMessage="Failed to save new learning plan"})["finally"](function(){a.isBusy=!1})},a.deletePlan=function(s,l,o){a.errorMessage="",a.isBusy=!0,a.showAlertText=!1,e["delete"]("/api/plans/"+s).then(function(e){0==o.length?(a.plans.splice(s,1),a.isBusy=!1,n.reload()):(a.errorMessage="Failed to delete plan",a.alertTextMessage="You should remove all courses from the "+l+" first",a.showAlertText=!0)},function(){a.errorMessage="Failed to delete course"})["finally"](function(){a.isBusy=!1})}}e.$inject=["$http","$route","$window"],angular.module("app-plans").controller("plansController",e)}();